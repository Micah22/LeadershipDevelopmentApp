<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation Test</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📚</text></svg>">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>Navigation Test Page</h1>
    
    <div class="test-section">
        <h2>Test 1: Check localStorage</h2>
        <div id="localStorageTest">Loading...</div>
    </div>
    
    <div class="test-section">
        <h2>Test 2: Login Test User</h2>
        <button onclick="loginTestUser()">Login as Test User (456@test.com)</button>
        <div id="loginTest">Click button to test login</div>
    </div>
    
    <div class="test-section">
        <h2>Test 3: Navigation Test</h2>
        <button onclick="testNavigation()">Test Navigation Function</button>
        <div id="navigationTest">Click button to test navigation</div>
    </div>
    
    <div class="test-section">
        <h2>Test 4: Go to Leadership Paths</h2>
        <button onclick="goToLeadershipPaths()">Go to Leadership Paths Page</button>
        <div id="pageTest">Click button to navigate to leadership paths</div>
    </div>

    <script>
        // Test 1: Check localStorage
        function checkLocalStorage() {
            const userEmail = localStorage.getItem('userEmail');
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const users = localStorage.getItem('users');
            
            let html = '<h3>localStorage Status:</h3>';
            html += '<p><strong>userEmail:</strong> ' + (userEmail || 'null') + '</p>';
            html += '<p><strong>isLoggedIn:</strong> ' + (isLoggedIn || 'null') + '</p>';
            html += '<p><strong>users:</strong> ' + (users ? 'Found (' + JSON.parse(users).length + ' users)' : 'null') + '</p>';
            
            if (users) {
                try {
                    const usersArray = JSON.parse(users);
                    html += '<h4>Available Users:</h4><ul>';
                    usersArray.slice(0, 3).forEach(user => {
                        html += '<li>' + user.email + ' (' + user.role + ') - Password: ' + user.password + '</li>';
                    });
                    html += '</ul>';
                } catch (e) {
                    html += '<p style="color: red;">Error parsing users: ' + e.message + '</p>';
                }
            }
            
            document.getElementById('localStorageTest').innerHTML = html;
        }
        
        // Test 2: Login test user
        function loginTestUser() {
            // Set login data
            localStorage.setItem('userEmail', '456@test.com');
            localStorage.setItem('isLoggedIn', 'true');
            
            document.getElementById('loginTest').innerHTML = 
                '<div class="success"><h3>âœ… Login Successful!</h3><p>Logged in as: 456@test.com</p></div>';
            
            // Refresh localStorage test
            checkLocalStorage();
        }
        
        // Test 3: Test navigation function
        function testNavigation() {
            // Load the leadership-paths.js script
            const script = document.createElement('script');
            script.src = 'leadership-paths.js';
            script.onload = function() {
                if (typeof updateNavigation === 'function') {
                    // Create a test nav element
                    const testNav = document.createElement('div');
                    testNav.id = 'navLinks';
                    document.body.appendChild(testNav);
                    
                    // Call updateNavigation
                    updateNavigation();
                    
                    const navHTML = testNav.innerHTML;
                    document.body.removeChild(testNav);
                    
                    if (navHTML) {
                        document.getElementById('navigationTest').innerHTML = 
                            '<div class="success"><h3>âœ… Navigation Function Works!</h3><p>Generated HTML: ' + navHTML + '</p></div>';
                    } else {
                        document.getElementById('navigationTest').innerHTML = 
                            '<div class="error"><h3>âŒ Navigation Function Failed</h3><p>No HTML generated</p></div>';
                    }
                } else {
                    document.getElementById('navigationTest').innerHTML = 
                        '<div class="error"><h3>âŒ Navigation Function Not Found</h3><p>updateNavigation function does not exist</p></div>';
                }
            };
            script.onerror = function() {
                document.getElementById('navigationTest').innerHTML = 
                    '<div class="error"><h3>âŒ Script Load Failed</h3><p>Could not load leadership-paths.js</p></div>';
            };
            document.head.appendChild(script);
        }
        
        // Test 4: Go to leadership paths
        function goToLeadershipPaths() {
            window.location.href = 'leadership-paths.html';
        }
        
        // Initialize
        checkLocalStorage();
    </script>
</body>
</html>
