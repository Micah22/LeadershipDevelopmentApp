<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Progress Overview - CFA Leadership Development</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“š</text></svg>">
    <!-- Load navbar component styles -->
    <link rel="stylesheet" href="../styles/navbar-component.css?v=2">
    <link rel="stylesheet" href="../styles/admin-overview-content.css">
    <link rel="stylesheet" href="../styles/admin-path-management-styles.css?v=8">
    <link rel="stylesheet" href="../styles/toast-component.css">
    <link rel="stylesheet" href="../styles/admin-overview-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../styles/tabs-component.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Load component scripts -->
    <script src="../components/navbar-component.js?v=2"></script>
    <script src="../components/toast-component.js"></script>
    <script src="../components/tabs-component.js"></script>
    <script src="../database/config.js"></script>
    <script src="../scripts/notification-service.js"></script>
    <script src="../scripts/permission-utils.js"></script>

</head>
<body>
    <!-- Navbar Container -->

    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="loading-indicator" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>Loading user data...</p>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Tabs Component -->
        <div class="tabs-container" id="tabsContainer">
            <!-- Tabs will be dynamically generated here -->
        </div>

        <!-- Tab Content -->
        <div class="tab-content active" id="userManagementContent">
            <div class="content-header">
                <div class="header-top">
                    <div class="header-text">
                        <h1 class="page-title">User Progress Overview</h1>
                        <p class="page-subtitle">Track and monitor all users' leadership development progress</p>
                    </div>
                    
                    <!-- Users by Role Floating Cards -->
                    <div class="header-cards">
                        <div class="floating-card total-users-card">
                            <div class="card-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="card-content">
                                <div class="card-number" id="totalUsers">0</div>
                                <div class="card-label">TOTAL USERS</div>
                            </div>
                        </div>
                        
                        <div class="floating-card role-card" id="adminRoleCard">
                            <div class="card-icon">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div class="card-content">
                                <div class="card-number" id="adminCount">0</div>
                                <div class="card-label">ADMIN</div>
                            </div>
                        </div>
                        
                        <div class="floating-card role-card" id="directorRoleCard">
                            <div class="card-icon">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <div class="card-content">
                                <div class="card-number" id="directorCount">0</div>
                                <div class="card-label">DIRECTOR</div>
                            </div>
                        </div>
                        
                        <div class="floating-card role-card" id="teamMemberRoleCard">
                            <div class="card-icon">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="card-content">
                                <div class="card-number" id="teamMemberCount">0</div>
                                <div class="card-label">TEAM MEMBER</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Individual User Progress Section -->
            <div class="section">
                <div class="section-header">
                    <div class="section-title-group">
                        <div class="section-icon">
                            <i class="fas fa-list-ul"></i>
                        </div>
                        <h2 class="section-title">Individual User Progress</h2>
                    </div>
                    <button class="action-btn" id="newUserBtn">
                        <i class="fas fa-plus"></i>
                        New User
                    </button>
                </div>
                <div class="section-content">
                    <div class="table-container">
                        <table class="progress-table">
                            <thead>
                                <tr>
                                    <th>USER</th>
                                    <th>ROLE</th>
                                    <th>STATUS</th>
                                    <th>ACTIONS</th>
                                </tr>
                            </thead>
                            <tbody id="userProgressTable">
                                <!-- User data will be populated here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Mobile User Cards -->
                    <div class="progress-table-mobile" id="userProgressTableMobile">
                        <!-- Mobile user cards will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Module Assignments Section -->
            <div class="section">
                <div class="section-header">
                    <div class="section-title-group">
                        <div class="section-icon">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <h2 class="section-title">Module Assignments</h2>
                    </div>
                    <button class="action-btn" id="assignModuleBtn">
                        <i class="fas fa-plus"></i>
                        Assign Module
                    </button>
                </div>
                <div class="section-content">
                    <div class="assignments-container">
                        <div class="assignments-filters">
                            <select id="assignmentUserFilter" class="filter-select">
                                <option value="">All Users</option>
                            </select>
                            <select id="assignmentModuleFilter" class="filter-select">
                                <option value="">All Modules</option>
                            </select>
                            <select id="assignmentStatusFilter" class="filter-select">
                                <option value="">All Statuses</option>
                                <option value="assigned">Assigned</option>
                                <option value="in_progress">In Progress</option>
                                <option value="completed">Completed</option>
                                <option value="overdue">Overdue</option>
                            </select>
                            <button class="btn btn-secondary" id="bulkUnassignBtn" style="display: none;">
                                <i class="fas fa-user-minus"></i>
                                Unassign Selected
                            </button>
                        </div>
                        <div class="table-container">
                            <table class="assignments-table">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllAssignments" title="Select All"></th>
                                        <th>USER</th>
                                        <th>MODULE</th>
                                        <th>ASSIGNED DATE</th>
                                        <th>DUE DATE</th>
                                        <th>STATUS</th>
                                        <th>PROGRESS</th>
                                        <th>NOTES</th>
                                        <th>ACTIONS</th>
                                    </tr>
                                </thead>
                                <tbody id="assignmentsTableBody">
                                    <!-- Assignments will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Mobile Assignments Cards -->
                        <div class="assignments-table-mobile" id="assignmentsTableMobile">
                            <!-- Mobile assignment cards will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Path Management Tab Content -->
        <div class="tab-content" id="pathManagementContent">
                <div class="content-header">
                    <h1 class="page-title">Path Management</h1>
                    <p class="page-subtitle">Manage learning modules and their requirements</p>
                </div>

                <!-- Search and Filter Section -->
                <div class="search-filter-section">
                    <div class="search-filter-container">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="moduleSearchInput" placeholder="Search modules by title or description..." />
                            <button type="button" id="clearSearchBtn" class="clear-search-btn" style="display: none;">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="filter-controls">
                            <select id="statusFilter" class="filter-select">
                                <option value="">All Statuses</option>
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                                <option value="draft">Draft</option>
                                <option value="archived">Archived</option>
                            </select>
                            <select id="phaseFilter" class="filter-select">
                                <option value="">All Phases</option>
                                <option value="phase1">Phase 1</option>
                                <option value="phase2">Phase 2</option>
                                <option value="phase3">Phase 3</option>
                                <option value="phase4">Phase 4</option>
                            </select>
                            <button type="button" id="clearFiltersBtn" class="clear-filters-btn">
                                <i class="fas fa-times"></i>
                                Clear Filters
                            </button>
                        </div>
                        <div class="add-module-inline">
                            <button class="btn btn-primary" id="addModuleBtn">
                                <i class="fas fa-plus"></i>
                                Add New Module
                            </button>
                        </div>
                    </div>
                    <div class="search-results-info" id="searchResultsInfo" style="display: none;">
                        <span id="resultsCount">0</span> modules found
                    </div>
                </div>

                <!-- Modules Management Grid -->
                <div class="modules-management-grid" id="modulesManagementGrid">
                    <!-- Modules will be populated here -->
                </div>
            </div>

        </div>

        <!-- Role Management Tab Content -->
        <div class="tab-content" id="roleManagementContent">
                <div class="content-header">
                    <h1 class="page-title">Role Management</h1>
                    <p class="page-subtitle">Manage user roles and permission levels across the system</p>
                </div>

                <!-- Role Overview Cards -->
                <div class="role-overview-cards">
                    <div class="overview-card">
                        <div class="card-icon"><i class="fas fa-users-cog"></i></div>
                        <div class="card-content">
                            <div class="card-number" id="totalRoles">0</div>
                            <div class="card-label">Total Roles</div>
                        </div>
                    </div>
                    <div class="overview-card">
                        <div class="card-icon"><i class="fas fa-user-check"></i></div>
                        <div class="card-content">
                            <div class="card-number" id="activeRoles">0</div>
                            <div class="card-label">Active Roles</div>
                        </div>
                    </div>
                    <div class="overview-card">
                        <div class="card-icon"><i class="fas fa-shield-alt"></i></div>
                        <div class="card-content">
                            <div class="card-number" id="permissionLevels">0</div>
                            <div class="card-label">Permission Levels</div>
                        </div>
                    </div>
                </div>

                <!-- Role Definitions Section -->
                <div class="section">
                    <div class="section-header">
                        <h2>Role Definitions</h2>
                        <button class="btn btn-primary" id="addRoleBtn">
                            <i class="fas fa-plus"></i> Add New Role
                        </button>
                    </div>
                    <div class="section-content">
                        <div class="roles-grid" id="rolesGrid">
                            <!-- Role cards will be populated here -->
                        </div>
                    </div>
                </div>

            </div>

        </div>

        <!-- Reports Tab Content -->
        <div class="tab-content" id="reportsContent">
            <div class="content-header">
                <h1 class="page-title">Reports & Analytics</h1>
                <p class="page-subtitle">Comprehensive insights into user progress, system performance, and learning outcomes</p>
            </div>

            <!-- Report Filters -->
            <div class="report-filters">
                <div class="filter-row">
                    <div class="filter-group">
                        <label for="reportDateRange">Date Range</label>
                        <select id="reportDateRange">
                            <option value="7">Last 7 days</option>
                            <option value="30" selected>Last 30 days</option>
                            <option value="90">Last 90 days</option>
                            <option value="365">Last year</option>
                            <option value="all">All time</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="reportRoleFilter">Role Filter</label>
                        <select id="reportRoleFilter">
                            <option value="all">All Roles</option>
                            <option value="admin">Admin</option>
                            <option value="director">Director</option>
                            <option value="team_member">Team Member</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="reportModuleFilter">Module Filter</label>
                        <select id="reportModuleFilter">
                            <option value="all">All Modules</option>
                            <!-- Module options will be populated by JS -->
                        </select>
                    </div>
                    <div class="filter-actions">
                        <button class="btn btn-primary" id="generateReportBtn">
                            <i class="fas fa-chart-line"></i>
                            Generate Report
                        </button>
                        <button class="btn btn-secondary" id="exportReportBtn">
                            <i class="fas fa-download"></i>
                            Export
                        </button>
                    </div>
                </div>
            </div>

            <!-- Key Metrics Cards -->
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="metric-content">
                        <div class="metric-value" id="totalActiveUsers">0</div>
                        <div class="metric-label">Active Users</div>
                        <div class="metric-change" id="activeUsersChange">+0%</div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="metric-content">
                        <div class="metric-value" id="completedModules">0</div>
                        <div class="metric-label">Modules Completed</div>
                        <div class="metric-change" id="completedModulesChange">+0%</div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="metric-content">
                        <div class="metric-value" id="avgCompletionTime">0h</div>
                        <div class="metric-label">Avg. Completion Time</div>
                        <div class="metric-change" id="completionTimeChange">+0%</div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="metric-content">
                        <div class="metric-value" id="avgSatisfaction">0%</div>
                        <div class="metric-label">Avg. Satisfaction</div>
                        <div class="metric-change" id="satisfactionChange">+0%</div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-section">
                <div class="chart-row">
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>User Progress Over Time</h3>
                            <div class="chart-controls">
                                <button class="chart-btn active" data-chart="progress">Progress</button>
                                <button class="chart-btn" data-chart="completions">Completions</button>
                            </div>
                        </div>
                        <div class="chart-content">
                            <canvas id="progressChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>Module Completion by Role</h3>
                        </div>
                        <div class="chart-content">
                            <canvas id="roleChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="chart-row">
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>Top Performing Modules</h3>
                        </div>
                        <div class="chart-content">
                            <canvas id="moduleChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>User Engagement Heatmap</h3>
                        </div>
                        <div class="chart-content">
                            <div id="heatmapContainer">
                                <!-- Heatmap will be rendered here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detailed Reports Table -->
            <div class="section">
                <div class="section-header">
                    <h2>Detailed Analytics</h2>
                    <div class="section-actions">
                        <button class="btn btn-secondary" id="refreshDataBtn">
                            <i class="fas fa-sync-alt"></i>
                            Refresh Data
                        </button>
                    </div>
                </div>
                <div class="section-content">
                    <div class="table-container">
                        <table class="analytics-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Role</th>
                                    <th>Modules Completed</th>
                                    <th>Avg. Score</th>
                                    <th>Last Activity</th>
                                    <th>Progress %</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="analyticsTableBody">
                                <!-- Analytics data will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Quiz Performance Section -->
            <div class="section">
                <div class="section-header">
                    <h2>Quiz Performance</h2>
                </div>
                <div class="section-content">
                    <div class="quiz-stats-grid">
                        <div class="quiz-stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-question-circle"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalQuizzesTaken">0</div>
                                <div class="stat-label">Quizzes Taken</div>
                            </div>
                        </div>
                        
                        <div class="quiz-stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="avgQuizScore">0%</div>
                                <div class="stat-label">Average Score</div>
                            </div>
                        </div>
                        
                        <div class="quiz-stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="quizPassRate">0%</div>
                                <div class="stat-label">Pass Rate</div>
                            </div>
                        </div>
                        
                        <div class="quiz-stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="avgQuizTime">0m</div>
                                <div class="stat-label">Avg. Time</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quiz Results Table -->
            <div class="section">
                <div class="section-header">
                    <h2>Quiz Results</h2>
                    <div class="section-actions">
                        <button class="btn btn-secondary" id="refreshQuizResultsBtn">
                            <i class="fas fa-sync-alt"></i>
                            Refresh Results
                        </button>
                    </div>
                </div>
                <div class="section-content">
                    <div class="table-container">
                        <table class="quiz-results-table">
                            <thead>
                                <tr>
                                    <th>Quiz Title</th>
                                    <th>User</th>
                                    <th>Score</th>
                                    <th>Points Earned</th>
                                    <th>Total Points</th>
                                    <th>Time Taken</th>
                                    <th>Date Taken</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="quizResultsTableBody">
                                <!-- Quiz results will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Tab Content -->
        <div class="tab-content" id="settingsContent">
            <div class="content-header">
                <h1 class="page-title">Settings</h1>
                <p class="page-subtitle">Configure your account settings and preferences</p>
            </div>
            
            <!-- Account Settings -->
            <div class="section">
                <div class="section-header">
                    <h2><i class="fas fa-user"></i> Account Settings</h2>
                </div>
                <div class="section-content">
                    <div class="settings-form">
                        <div class="form-group">
                            <label for="username">Username</label>
                            <div class="input-group">
                                <input type="text" id="username" name="username" value="" readonly>
                                <button class="edit-btn" onclick="editUsername()">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <div class="input-group">
                                <input type="email" id="email" name="email" value="" readonly>
                                <button class="edit-btn" onclick="editEmail()">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="currentPassword">Current Password</label>
                            <div class="input-group">
                                <input type="password" id="currentPassword" name="currentPassword" placeholder="Enter current password">
                                <button class="toggle-password" onclick="togglePassword('currentPassword')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="newPassword">New Password</label>
                            <div class="input-group">
                                <input type="password" id="newPassword" name="newPassword" placeholder="Enter new password">
                                <button class="toggle-password" onclick="togglePassword('newPassword')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmPassword">Confirm New Password</label>
                            <div class="input-group">
                                <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm new password">
                                <button class="toggle-password" onclick="togglePassword('confirmPassword')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button class="btn btn-primary" onclick="updateAccount()">
                                <i class="fas fa-save"></i> Update Account
                            </button>
                            <button class="btn btn-secondary" onclick="resetAccountForm()">
                                <i class="fas fa-undo"></i> Reset
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Notification Settings -->
            <div class="section">
                <div class="section-header">
                    <h2><i class="fas fa-bell"></i> Notification Preferences</h2>
                </div>
                <div class="section-content">
                    <div class="notification-settings">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h3>Email Notifications</h3>
                                <p>Receive notifications via email</p>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="emailNotifications" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h3>Browser Notifications</h3>
                                <p>Receive notifications in your browser</p>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="browserNotifications" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h3>Deadline Warnings</h3>
                                <p>Get notified about upcoming deadlines</p>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="deadlineWarnings" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h3>Module Assignments</h3>
                                <p>Get notified when new modules are assigned</p>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="moduleAssignments" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h3>Progress Reminders</h3>
                                <p>Get reminded to continue your learning</p>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="progressReminders" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h3>System Updates</h3>
                                <p>Get notified about system updates and maintenance</p>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="systemUpdates" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="setting-actions">
                            <button class="btn btn-primary" onclick="saveNotificationSettings()">
                                <i class="fas fa-save"></i> Save Notification Settings
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Privacy Settings -->
            <div class="section">
                <div class="section-header">
                    <h2><i class="fas fa-shield-alt"></i> Privacy & Security</h2>
                </div>
                <div class="section-content">
                    <div class="privacy-settings">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h3>Two-Factor Authentication</h3>
                                <p>Add an extra layer of security to your account</p>
                            </div>
                            <div class="setting-control">
                                <button class="btn btn-outline" onclick="setupTwoFactor()">
                                    <i class="fas fa-key"></i> Setup 2FA
                                </button>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h3>Login Notifications</h3>
                                <p>Get notified when someone logs into your account</p>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="loginNotifications" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h3>Data Export</h3>
                                <p>Download your personal data</p>
                            </div>
                            <div class="setting-control">
                                <button class="btn btn-outline" onclick="exportData()">
                                    <i class="fas fa-download"></i> Export Data
                                </button>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h3>Account Deletion</h3>
                                <p>Permanently delete your account and all data</p>
                            </div>
                            <div class="setting-control">
                                <button class="btn btn-danger" onclick="deleteAccount()">
                                    <i class="fas fa-trash"></i> Delete Account
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Appearance Settings -->
            <div class="section">
                <div class="section-header">
                    <h2><i class="fas fa-palette"></i> Appearance</h2>
                </div>
                <div class="section-content">
                    <div class="appearance-settings">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h3>Theme</h3>
                                <p>Choose your preferred theme</p>
                            </div>
                            <div class="setting-control">
                                <select id="themeSelect" onchange="changeTheme()">
                                    <option value="light">Light</option>
                                    <option value="dark">Dark</option>
                                    <option value="auto">Auto (System)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h3>Language</h3>
                                <p>Select your preferred language</p>
                            </div>
                            <div class="setting-control">
                                <select id="languageSelect" onchange="changeLanguage()">
                                    <option value="en">English</option>
                                    <option value="es">EspaÃ±ol</option>
                                    <option value="fr">FranÃ§ais</option>
                                    <option value="de">Deutsch</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h3>Font Size</h3>
                                <p>Adjust the text size for better readability</p>
                            </div>
                            <div class="setting-control">
                                <input type="range" id="fontSize" min="12" max="20" value="16" onchange="changeFontSize()">
                                <span id="fontSizeValue">16px</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- System Information -->
            <div class="section">
                <div class="section-header">
                    <h2><i class="fas fa-info-circle"></i> System Information</h2>
                </div>
                <div class="section-content">
                    <div class="system-info">
                        <div class="info-item">
                            <span class="info-label">App Version:</span>
                            <span class="info-value">1.0.0</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Last Login:</span>
                            <span class="info-value" id="lastLogin">Loading...</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Account Created:</span>
                            <span class="info-value" id="accountCreated">Loading...</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Browser:</span>
                            <span class="info-value" id="browserInfo">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- User Details Modal -->
    <div class="modal-overlay" id="userModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">User Details</h2>
                <button class="modal-close" id="modalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="userEditForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editFullName">Full Name</label>
                            <input type="text" id="editFullName" name="fullName" required>
                        </div>
                        <div class="form-group">
                            <label for="editUsername">Username</label>
                            <input type="text" id="editUsername" name="username" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editPassword">Password</label>
                            <input type="password" id="editPassword" name="password" required>
                        </div>
                        <div class="form-group">
                            <label for="editStartDate">Start Date</label>
                            <input type="date" id="editStartDate" name="startDate">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="editEmail">Email</label>
                        <input type="email" id="editEmail" name="email">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editRole">Role</label>
                            <select id="editRole" name="role" required>
                                <option value="Team Member">Team Member</option>
                                <option value="Supervisor">Supervisor</option>
                                <option value="Director">Director</option>
                                <option value="Admin">Admin</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editStatus">Status</label>
                            <select id="editStatus" name="status" required>
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                                <option value="pending">Pending</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="modalCancel">Cancel</button>
                <button type="button" class="btn btn-danger" id="modalResetProgress" style="display: none;">
                    <i class="fas fa-undo"></i>
                    Reset Progress
                </button>
                <button type="button" class="btn btn-primary" id="modalSave">Save Changes</button>
            </div>
        </div>
    </div>


    <!-- Module Edit Modal -->
    <div class="modal-overlay" id="moduleModal">
        <div class="modal-content">
            <div class="modal-header sticky-header">
                <h2 id="modalModuleTitle">Edit Module</h2>
                <button class="modal-close" id="moduleModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body scrollable-content">
                <form id="moduleEditForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editModuleTitle">Module Title</label>
                            <input type="text" id="editModuleTitle" name="title" required>
                        </div>
                        <div class="form-group">
                            <label for="editModuleStatus">Status</label>
                            <select id="editModuleStatus" name="status" required>
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                                <option value="draft">Draft</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editModuleDifficulty">Phase Level</label>
                            <select id="editModuleDifficulty" name="difficulty" required>
                                <option value="Phase 1">Phase 1</option>
                                <option value="Phase 2">Phase 2</option>
                                <option value="Phase 3">Phase 3</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editModuleDuration">Estimated Duration (hours)</label>
                            <input type="number" id="editModuleDuration" name="duration" min="0.5" max="40" step="0.5" placeholder="2.5" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="editModuleDescription">Description</label>
                        <textarea id="editModuleDescription" name="description" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="editModulePrerequisites">Prerequisites</label>
                        <input type="text" id="editModulePrerequisites" name="prerequisites" placeholder="e.g., Communication Skills Module, 6 months experience">
                    </div>
                    <div class="form-group">
                        <label for="editModuleTags">Tags/Keywords</label>
                        <input type="text" id="editModuleTags" name="tags" placeholder="e.g., leadership, team building, communication (comma-separated)">
                    </div>
                    <div class="form-section">
                        <h4>Performance Rubric</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="editModuleQualityUnsatisfactory">Quality Criteria</label>
                                <div class="rubric-levels">
                                    <input type="text" id="editModuleQualityUnsatisfactory" name="qualityUnsatisfactory" class="rubric-input rubric-red" placeholder="Unsatisfactory level criteria">
                                    <input type="text" id="editModuleQualityAverage" name="qualityAverage" class="rubric-input rubric-yellow" placeholder="Average level criteria">
                                    <input type="text" id="editModuleQualityExcellent" name="qualityExcellent" class="rubric-input rubric-green" placeholder="Excellent level criteria">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="editModuleSpeedUnsatisfactory">Speed/Timing Criteria</label>
                                <div class="rubric-levels">
                                    <input type="text" id="editModuleSpeedUnsatisfactory" name="speedUnsatisfactory" class="rubric-input rubric-red" placeholder="Unsatisfactory level criteria">
                                    <input type="text" id="editModuleSpeedAverage" name="speedAverage" class="rubric-input rubric-yellow" placeholder="Average level criteria">
                                    <input type="text" id="editModuleSpeedExcellent" name="speedExcellent" class="rubric-input rubric-green" placeholder="Excellent level criteria">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="editModuleCommunicationUnsatisfactory">Communication Criteria</label>
                                <div class="rubric-levels">
                                    <input type="text" id="editModuleCommunicationUnsatisfactory" name="communicationUnsatisfactory" class="rubric-input rubric-red" placeholder="Unsatisfactory level criteria">
                                    <input type="text" id="editModuleCommunicationAverage" name="communicationAverage" class="rubric-input rubric-yellow" placeholder="Average level criteria">
                                    <input type="text" id="editModuleCommunicationExcellent" name="communicationExcellent" class="rubric-input rubric-green" placeholder="Excellent level criteria">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editModuleAuthor">Author/Instructor</label>
                            <input type="text" id="editModuleAuthor" name="author" placeholder="Module creator name">
                        </div>
                        <div class="form-group">
                            <label for="editModuleVersion">Version</label>
                            <input type="text" id="editModuleVersion" name="version" value="1.0" placeholder="1.0">
                        </div>
                    </div>
                    <div class="checklist-section">
                        <h3>Learning Tasks</h3>
                        <div class="checklist" id="modalChecklist">
                            <!-- Checklist items will be populated here -->
                        </div>
                        <button type="button" class="btn btn-secondary" id="addTaskBtn">
                            <i class="fas fa-plus"></i>
                            Add Task
                        </button>
                    </div>
                </form>
            </div>
            <div class="modal-footer sticky-footer">
                <button type="button" class="btn btn-secondary" id="moduleModalCancel">Cancel</button>
                <button type="button" class="btn btn-primary" id="moduleModalSave">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Module Assignment Modal -->
    <div class="modal-overlay" id="assignmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="assignmentModalTitle">Assign Module</h2>
                <button class="modal-close" id="assignmentModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="assignmentForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Users</label>
                            <div id="userCheckboxes" class="user-checkboxes">
                                <!-- User checkboxes will be populated here -->
                            </div>
                            <small class="form-help">Select one or more users to assign modules to</small>
                        </div>
                        <div class="form-group">
                            <label>Modules</label>
                            <div id="moduleCheckboxes" class="module-checkboxes">
                                <!-- Module checkboxes will be populated here -->
                            </div>
                            <small class="form-help">Select one or more modules to assign</small>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="assignmentDueDate">Due Date</label>
                            <input type="date" id="assignmentDueDate" name="dueDate">
                        </div>
                        <div class="form-group">
                            <label for="assignmentStatus">Status</label>
                            <select id="assignmentStatus" name="status">
                                <option value="assigned">Assigned</option>
                                <option value="in_progress">In Progress</option>
                                <option value="completed">Completed</option>
                                <option value="overdue">Overdue</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="assignmentNotes">Notes</label>
                        <textarea id="assignmentNotes" name="notes" rows="3" placeholder="Optional notes about this assignment..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="assignmentModalCancel">Cancel</button>
                <button type="button" class="btn btn-primary" id="assignmentModalSave">Assign Module</button>
            </div>
        </div>
    </div>

    <!-- Role Management Modal -->
    <div class="modal-overlay" id="roleModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="roleModalTitle">Add New Role</h2>
                <button class="modal-close" id="roleModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="roleForm">
                    <input type="hidden" id="roleId">
                    <div class="form-group">
                        <label for="roleName">Role Name</label>
                        <input type="text" id="roleName" required>
                    </div>
                    <div class="form-group">
                        <label for="roleDescription">Description</label>
                        <textarea id="roleDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="roleLevel">Permission Level</label>
                        <select id="roleLevel">
                            <option value="1">Level 1 (Basic)</option>
                            <option value="2">Level 2 (Standard)</option>
                            <option value="3">Level 3 (Advanced)</option>
                            <option value="4">Level 4 (Full Access)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Page Access</label>
                        <div class="permissions-grid" id="rolePermissionsGrid">
                            <!-- Page access checkboxes will be populated here -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" id="roleModalCancel">Cancel</button>
                        <button type="submit" class="btn btn-primary" id="roleModalSave">Save Role</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // Loading admin-overview-script.js
    </script>
    
    <!-- Navbar Component is auto-initialized by navbar-component.js -->
    
    <script src="../scripts/admin-overview-script.js?v=105"></script>
    <script>
        // admin-overview-script.js loaded
    </script>
</body>
</html>
